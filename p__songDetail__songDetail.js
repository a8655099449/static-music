(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"1Jq7":function(e,t,n){e.exports={list:"list___1Hq3l","list-item":"list-item___2L4fe",singer:"singer___1Xw6G","song-data":"song-data___1t24v","icon-box":"icon-box___qM9pk"}},"8cX2":function(e,t,n){"use strict";var a=n("q1tI"),c=n.n(a);n("tAOl");t["a"]=function(e){var t=e.title,n=void 0===t?"\u9ed8\u8ba4\u6807\u9898":t;return c.a.createElement("div",{style:{borderBottom:"1px solid #cccccc",paddingBottom:"7px",fontWeight:"600",fontSize:"14px",color:"#000"}},n)}},FoL2:function(e,t,n){e.exports={"rec-playlist":"rec-playlist___3P7YG",list:"list___3G_LZ","list-item":"list-item___3iPBW","img-box":"img-box___Loar-","desc-box":"desc-box___1nfg6"}},HbN3:function(e,t,n){e.exports={content:"content___3MixN","left-content":"left-content___2mGmv","right-content":"right-content___1PiSt"}},YaPe:function(e,t,n){e.exports={header:"header___eTWb1","commnet-inp":"commnet-inp___8ORER",avatar:"avatar___13-mc","inp-box":"inp-box___2TcCK",mask:"mask___3L-L2","comment-btn":"comment-btn___3G3YS"}},fbcc:function(e,t,n){"use strict";n.r(t);var a=n("oBTY"),c=n("k1fw"),i=n("9og8"),s=n("fWQN"),o=n("mtLc"),r=n("yKVA"),l=n("879j"),m=n("WmNS"),u=n.n(m),g=n("q1tI"),d=n.n(g),h=n("HbN3"),p=n.n(h),_=n("sOOk"),f=n("wJgg"),b=n.n(f),v=function(e){var t,n,a=e.songData,c=e.commentCount,i=e.lrcMen,s=e.lrcArr,o=e.clickPlay,r=e.showMoreLrc,l=e.lrcLen,m=e.isMore;return a?(n=0===s.lrcLen?null:m?d.a.createElement("div",{className:"".concat(b.a["show-more"]),onClick:r},d.a.createElement("span",{className:"underline"},"\u6536\u8d77")," ",d.a.createElement("i",{className:"icon-xia-down iconfont turn"})):d.a.createElement("div",{className:"".concat(b.a["show-more"]),onClick:r},d.a.createElement("span",{className:"underline"},"\u5c55\u5f00")," ",d.a.createElement("i",{className:"icon-xia-down iconfont"})),t=i.nickname?d.a.createElement("div",{className:"".concat(b.a["gx-men"]," ")},"\u8d21\u732e\u6b4c\u8bcd:"," ",d.a.createElement("span",{className:"underline",onClick:function(){return Object(_["f"])(i.userid)}},i.nickname)):null,d.a.createElement("div",{className:"".concat(b.a["detail-content"])},d.a.createElement("div",{className:"".concat(b.a["img-box"]),title:a.name},d.a.createElement("div",{className:"".concat(b.a["bg"])}),d.a.createElement("img",{src:a.al.picUrl,alt:a.name,className:"img-auto"})),d.a.createElement("div",{className:"".concat(b.a["desc-box"])},d.a.createElement("div",{className:"".concat(b.a["name"])},d.a.createElement("div",{className:"".concat(b.a["tag"])}),d.a.createElement("div",{className:"".concat(b.a["name-text"])},a.name)),d.a.createElement("div",{className:"".concat(b.a["singer"])},"\u6b4c\u624b :"," ",d.a.createElement("span",{className:"underline",onClick:function(){return Object(_["d"])(a.singer.id)}},a.singer.name)),d.a.createElement("div",{className:"".concat(b.a["singer"])},"\u6240\u5c5e\u4e13\u8f91 :"," ",d.a.createElement("span",{className:"underline",onClick:function(){return Object(_["a"])(a.al.id)}},a.al.name)),d.a.createElement("div",{className:"".concat(b.a["btn-box"])},d.a.createElement("div",{className:"".concat(b.a["btn-item"]," ").concat(b.a["play"]," btn btn-blue "),onClick:o},d.a.createElement("i",{className:"iconfont icon-ziyuan"})," \u64ad\u653e"),d.a.createElement("div",{className:"".concat(b.a["btn-item"]," btn-gray btn")},d.a.createElement("i",{className:"iconfont icon-shoucang1"})," \u6536\u85cf"),d.a.createElement("div",{className:"".concat(b.a["btn-item"]," btn-gray btn")},d.a.createElement("i",{className:"iconfont icon-zhuanfafasong-3"}),"\u5206\u4eab"),d.a.createElement("div",{className:"".concat(b.a["btn-item"]," btn-gray btn")},d.a.createElement("i",{className:"iconfont icon-xiazai"})," \u4e0b\u8f7d"),d.a.createElement("div",{className:"".concat(b.a["btn-item"]," btn-gray btn")},d.a.createElement("i",{className:"iconfont icon-pinglunzhuanhuan"})," \uff08",c,"\uff09")),d.a.createElement("div",{className:"".concat(b.a["geci"])},d.a.createElement("ul",{className:"".concat(b.a["geci-list"]," public-scroll")},s.map((function(e,t){if(l>t)return d.a.createElement("li",{key:t}," ",e.content," ")}))),n,t),d.a.createElement("div",{className:"".concat(b.a["mini-btn"])},d.a.createElement("div",{className:"".concat(b.a["play"]," btn btn-blue "),onClick:o},d.a.createElement("i",{className:"iconfont icon-ziyuan"})," \u7acb\u5373\u64ad\u653e"))))):d.a.createElement("div",null,"loading")},y=n("FoL2"),E=n.n(y),N=n("8cX2"),w=function(e){var t=e.recPlayList,n=e.goPlayList;return d.a.createElement("div",{className:"".concat(E.a["rec-playlist"])},d.a.createElement(N["a"],{title:"\u5305\u542b\u8fd9\u9996\u6b4c\u7684\u6b4c\u5355"}),d.a.createElement("div",{className:"".concat(E.a["list"])},t.map((function(e,t){return d.a.createElement("div",{className:"".concat(E.a["list-item"]),key:e.id},d.a.createElement("div",{className:"".concat(E.a["img-box"])},d.a.createElement("img",{src:e.coverImgUrl,alt:"\u90a3\u4e9b\u597d\u542c\u5230\u7206\u4e86\u7684\u6b4c"})),d.a.createElement("div",{className:"".concat(E.a["desc-box"])},d.a.createElement("p",{className:"".concat(E.a["name"]," underline text-row-1"),onClick:function(){n(e)}},e.name),d.a.createElement("div",{className:"text-row-1"},"by"," ",d.a.createElement("span",{className:"underline",onClick:function(){return Object(_["f"])(e.userId)}},e.creator.nickname))))}))))},x=n("1Jq7"),k=n.n(x),L=function(e){var t=e.simiSongs,n=e.changeSongData;return d.a.createElement("div",null,d.a.createElement(N["a"],{title:"\u76f8\u4f3c\u6b4c\u66f2"}),d.a.createElement("div",{className:"".concat(k.a["list"])},t.map((function(e,t){return d.a.createElement("div",{className:"".concat(k.a["list-item"]),key:t},d.a.createElement("div",{className:"".concat(k.a["song-data"])},d.a.createElement("div",{className:"".concat(k.a["song-name"]," text-row-1 underline"),onClick:function(){n(e,"changeSong")}},e.name),d.a.createElement("div",{className:"".concat(k.a["singer"]," text-row-1 underline")},e.artists[0].name)),d.a.createElement("div",{className:"".concat(k.a["icon-box"])},d.a.createElement("i",{className:"iconfont icon-icon_play click",title:"\u64ad\u653e",onClick:function(){n(e,"playSong")}}),d.a.createElement("i",{className:"iconfont icon-jiahaocu click",title:"\u6dfb\u52a0\u5230\u64ad\u653e\u5217\u8868",onClick:function(){n(e,"addPlayList")}})))}))))},S=n("9kvl"),C=n("x5H0"),j=(n("YaPe"),n("8P1l")),O=n("uG9E"),P=function(e){var t=e.hotComments,n=e.commentCount,a=e.newComments,c=e.id;return d.a.createElement("div",null,d.a.createElement(O["a"],{commentCount:n}),d.a.createElement(N["a"],{title:"\u7cbe\u5f69\u8bc4\u8bba"}),t.map((function(e,t){return d.a.createElement(j["a"],{item:e,key:t,type:0,id:c})})),d.a.createElement("div",{style:{height:"10px"}}),d.a.createElement(N["a"],{title:"\u6700\u65b0\u8bc4\u8bba"}),a.map((function(e,t){return d.a.createElement(j["a"],{item:e,key:t,type:0,id:c})})))},M=n("/MKj"),I=n("PioQ"),D=n("Vn/K"),q=n("v5AT"),T=n("ty2S"),z=function(e){Object(r["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;Object(s["a"])(this,n),a=t.call(this,e),a.songId=411214279,a.limitData={pageNo:1,pageSize:10,type:0},a.state={songData:null,commentCount:0,lrcArr:[],lrcMen:{},recPlayList:[],simiSongs:[],hotComments:[],lrcLen:5,isMore:!1,newComments:[],seletPage:1,pageSize:0,isReq:!0},a.handleScroll=function(){clearTimeout(a.scrollTimer),a.scrollTimer=setTimeout((function(){var e=document.documentElement.scrollHeight||document.body.scrollHeight,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,n=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;t+n+600>=e&&!a.state.isReq&&(a.limitData.pageNo++,a._getMusicNewComment())}),100)},a.showMoreLrc=function(){var e=!a.state.isMore,t=e?a.state.lrcArr.length:5;a.setState({lrcLen:t,isMore:e})},a.unlisten=S["a"].listen((function(e,t){"/songdetail"===e.pathname&&e.query.songId&&(a.songId=e.query.songId,a.init())})),a.changeSongData=function(e,t){switch(t){case"changeSong":S["a"].push({pathname:"/songdetail",query:{songId:e.id}});break;case"playSong":case"addPlayList":var n={singerName:e.artists[0].name,songId:e.id,songName:e.name,dt:e.duration};Object(D["m"])(n,t);break}},a.goPlayList=function(e){S["a"].push({pathname:"/playlist",query:{id:e.id}})},a.clickPlay=function(){var e=a.songs.name,t=a.songs.id,n=a.songs.ar[0].name,c=a.songs.dt;Object(D["m"])({singerName:n,songId:t,songName:e,dt:c})},a.showLogin=function(){C["a"].emit("showLogin")},a.changePage=function(e){e<=0||e>a.state.pageSize||e!=a.state.seletPage&&(a.limitData.pageNo=e,a._getMusicNewComment(),a.setState({seletPage:e}))};var c=e.location.query;return a.songId=c.songId||411214279,a.init(),a}return Object(o["a"])(n,[{key:"init",value:function(){this._getMusicDatail(),this._getMusicHotComment(),this._getMusicLyric(),this._getPlayListForSongID(),this._getSimiSong(),this._getMusicNewComment(),Object(D["n"])(0)}},{key:"_getMusicDatail",value:function(){var e=Object(i["a"])(u.a.mark((function e(){var t,n,a,c,i;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["a"])({ids:this.songId});case 2:t=e.sent,200===t.code&&(n=t.songs[0],this.songs=n,a=n.name,c=n.al,i=n.ar[0],document.title="".concat(a," - \u5355\u66f2"),this.setState({songData:{singer:i,name:a,al:c}}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"_getMusicHotComment",value:function(){var e=Object(i["a"])(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.state.isReq=!0,e.next=3,Object(q["a"])({id:this.songId,sortType:2,pageNo:1,pageSize:10,type:0});case 3:t=e.sent,200===t.code&&(this.state.isReq=!1,n=t.data.comments,a=t.data.totalCount,this.setState({commentCount:a,hotComments:n,isReq:!1}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_getMusicNewComment",value:function(){var e=Object(i["a"])(u.a.mark((function e(){var t,n,i,s;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=null,n=this.state.newComments,this.limitData.pageNo>1&&(t=n[n.length-1].time),e.next=5,Object(q["a"])(Object(c["a"])({id:this.songId,sortType:3,cursor:t},this.limitData));case 5:i=e.sent,200===i.code&&(n.push.apply(n,Object(a["a"])(i.data.comments)),s=Math.ceil(i.data.totalCount/30),this.setState({newComments:n,pageSize:s}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_getMusicLyric",value:function(){var e=Object(i["a"])(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["b"])({id:this.songId});case 2:t=e.sent,200===t.code&&!t.nolyric&&t.lrc&&(n=Object(D["j"])(t.lrc.lyric),a={},t.lyricUser&&(a=t.lyricUser),this.setState({lrcArr:n,lrcMen:a}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_getPlayListForSongID",value:function(){var e=Object(i["a"])(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["e"])({id:this.songId});case 2:t=e.sent,n=t.playlists,this.setState({recPlayList:n});case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_getSimiSong",value:function(){var e=Object(i["a"])(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["f"])({id:this.songId});case 2:t=e.sent,n=t.songs,this.setState({simiSongs:n});case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=this.props,t=e.userInfo,n=e.isLogin;return d.a.createElement("div",{className:"page-content content-box ".concat(p.a["content"])},d.a.createElement("div",{className:"".concat(p.a["left-content"])},d.a.createElement(v,{songData:this.state.songData,commentCount:this.state.commentCount,lrcMen:this.state.lrcMen,lrcArr:this.state.lrcArr,lrcLen:this.state.lrcLen,isMore:this.state.isMore,clickPlay:this.clickPlay,showMoreLrc:this.showMoreLrc}),d.a.createElement("div",{className:"ismini"},d.a.createElement(w,{recPlayList:this.state.recPlayList,goPlayList:this.goPlayList}),d.a.createElement(L,{simiSongs:this.state.simiSongs,changeSongData:this.changeSongData})),d.a.createElement(P,{hotComments:this.state.hotComments,commentCount:this.state.commentCount,newComments:this.state.newComments,isLogin:n,userInfo:t,showLogin:this.showLogin,id:this.songId})),d.a.createElement("div",{className:"".concat(p.a["right-content"]," isweb")},d.a.createElement(w,{recPlayList:this.state.recPlayList,goPlayList:this.goPlayList}),d.a.createElement(L,{simiSongs:this.state.simiSongs,changeSongData:this.changeSongData})))}}]),n}(d.a.Component);t["default"]=Object(M["b"])(I["b"],I["a"])(z)},tAOl:function(e,t,n){},ty2S:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return r})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return u}));var a=n("o1iF");function c(e){return Object(a["a"])({url:"/song/detail",params:e})}function i(e){return Object(a["a"])({url:"/song/url",params:e,iscookie:!0})}function s(e){return Object(a["a"])({url:"/lyric",params:e})}function o(e){return Object(a["a"])({url:"/playlist/detail",params:e,iscookie:!0})}function r(e){return Object(a["a"])({url:"/related/playlist",params:e,iscookie:!0})}function l(e){return Object(a["a"])({url:"/album/newest",params:e,iscookie:!0})}function m(e){return Object(a["a"])({url:"/simi/playlist",params:e})}function u(e){return Object(a["a"])({url:"/simi/song",params:e})}},wJgg:function(e,t,n){e.exports={"detail-content":"detail-content___3p0sk","img-box":"img-box___2ChSA",bg:"bg___2IrgT","desc-box":"desc-box___24Zuu",name:"name___1N3Wx",tag:"tag___2VBKL","name-text":"name-text___1kdJZ",singer:"singer___3DmmU","btn-box":"btn-box___WlyyT","btn-item":"btn-item___2eMV-","geci-list":"geci-list___izl5V","gx-men":"gx-men___NvDZo","show-more":"show-more___qjEI2","mini-btn":"mini-btn___2Ur69",geci:"geci___3oZlx",play:"play___lTGpj"}}}]);